<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                   http://www.liquibase.org/xml/dbchangelog/dbchangelog-4.1.xsd">

    <changeSet id="2" author="Dmitry">
        <comment>Создаются внешние ключи</comment>
        <createTable tableName="person_to_contact">
            <column name="person_id" type="bigint"/>
            <column name="contact_id" type="bigint"/>
        </createTable>
        <createTable tableName="person_to_medical_card">
            <column name="person_id" type="bigint"/>
            <column name="medical_card_id" type="bigint"/>
        </createTable>
        <createTable tableName="address_to_contact">
            <column name="address_id" type="bigint"/>
            <column name="contact_id" type="bigint"/>
        </createTable>
        <createTable tableName="illness_to_medical_card">
            <column name="illness_id" type="bigint"/>
            <column name="medical_card_id" type="bigint"/>
        </createTable>
        <addForeignKeyConstraint baseTableName="person_to_contact" baseColumnNames="person_id" constraintName="person_id_fk" referencedTableName="person_data" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="person_to_contact" baseColumnNames="contact_id" constraintName="contact_person_fk" referencedTableName="contact" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="address_to_contact" baseColumnNames="address_id" constraintName="address_id_fk" referencedTableName="address" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="address_to_contact" baseColumnNames="contact_id" constraintName="contact_id_fk" referencedTableName="contact" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="illness_to_medical_card" baseColumnNames="illness_id" constraintName="illness_id_fk" referencedTableName="illness" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="illness_to_medical_card" baseColumnNames="medical_card_id" constraintName="medical_card_id_fk" referencedTableName="medical_card" referencedColumnNames="id"/>
    </changeSet>
</databaseChangeLog>